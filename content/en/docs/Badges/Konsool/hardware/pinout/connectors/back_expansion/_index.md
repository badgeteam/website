---
title: "Internal expansion port"
linkTitle: "Expansion port"
nodateline: true
weight: 0
---

## Back Expansion layout

<div style="background-color: white; padding: 1.5rem; width: 60%; display: inline-block;">
  <img src="back-expansion.png" alt="Back Expansion pinout">
</div>

## Back expansion port

This port is not exposed by default, and modified back covers need to be used to make it accessible.
For this reason the port is also named "Internal expansion port".

| Pin | Type  | Power domain   | Maximum current                                 | Name       | P4 GPIO | Function                                                                                                                                                                                                                      |
| --- | ----- | -------------- | ----------------------------------------------- | ---------- | ------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1   | Power | VOTG           | 1A                                              | VOTG       | -       | Supply rail of the USB-A plug, provides 5 volt if OTG boost is enabled or voltage of VSYS when OTG boost is disabled                                                                                                          |
| 2   | USB   | USB-C VBUS     | -                                               | HUB_USB1_P | -       | USB port 4 on the internal USB hub, allows add-ons to make a device available to the host PC via the USB-C port                                                                                                               |
| 3   | Power | VBATT (~3.7v)  | 1A                                              | VBATT      | -       | Direct connection to the Lithium Polymer battery, can also be used to supply current to the device if (AND ONLY IF) there is no battery connected to the battery connector                                                    |
| 4   | USB   | 3.3v           | -                                               | HUB_USB1_N | -       | USB port 4 on the internal USB hub, allows add-ons to make a device available to the host PC via the USB-C port                                                                                                               |
| 5   | Power | VSYS (~3.7-5v) | 1A                                              | VSYS       | -       | Same as VBATT but switched by the PMIC, turns off when the device is turned off via the soft power on/off feature                                                                                                             |
| 6   | Power | GND            | -                                               | GND        | -       | Ground, voltage reference for all supply rails                                                                                                                                                                                |
| 7   | Power | GND            | -                                               | GND        | -       | Ground, voltage reference for all supply rails                                                                                                                                                                                |
| 8   | Power | 3.3v           | 1A                                              | +3.3V      | -       | Regulated 3.3v rail                                                                                                                                                                                                           |
| 9   | I2C   | 3.3v           | 40mA source, 28mA sink                          | INT_SCL    | 10      | Internal I2C bus SCL signal, can only be used for I2C communication. We recommend connecting an EEPROM for add-on identification to this bus                                                                                  |
| 10  | I2C   | 3.3v           | 40mA source, 28mA sink                          | INT_SDA    | 9       | Internal I2C bus SDA signal, can only be used for I2C communication. We recommend connecting an EEPROM for add-on identification to this bus                                                                                  |
| 11  | GPIO  | 3.3v           | 40mA source, 28mA sink                          | E0         | 36      | GPIO, needs to remain HIGH level (4.7k pull-up on the mainboard) for USB firmware download boot option to function                                                                                                            |
| 12  | GPIO  | 3.3v           | 40mA source, 28mA sink                          | E2         | 0       | GPIO                                                                                                                                                                                                                          |
| 13  | Power | VSDCARD        | 50mA                                            | VSDCARD    | -       | Supply rail for the micro SD card socket and some GPIO pins, can either be off, 3.3v or 1.8v depending on card type and communication speed and configuration in software                                                     |
| 14  | GPIO  | VSDCARD        | 40mA source, 28mA sink (limited by supply rail) | E3         | 45      | GPIO, uses VSDCARD supply rail!                                                                                                                                                                                               |
| 15  | GPIO  | VSDCARD        | 40mA source, 28mA sink (limited by supply rail) | E4         | 48      | GPIO, uses VSDCARD supply rail!                                                                                                                                                                                               |
| 16  | GPIO  | VSDCARD        | 40mA source, 28mA sink (limited by supply rail) | E5         | 47      | GPIO, uses VSDCARD supply rail!                                                                                                                                                                                               |
| 17  | GPIO  | VSDCARD        | 40mA source, 28mA sink (limited by supply rail) | E6         | 46      | GPIO, uses VSDCARD supply rail!                                                                                                                                                                                               |
| 18  | GPIO  | 3.3v           | 40mA source, 28mA sink                          | EXT_INT    | 7       | GPIO, connected to GPIO in low power domain: can be used to wake up the ESP32-P4 from deep sleep, if the add-on requires an interrupt pin we recommend connecting it here, otherwise this pin can be used like any other GPIO |
| 19  | GPIO  | 3.3v           | 40mA source, 28mA sink                          | E12        | 54      | GPIO                                                                                                                                                                                                                          |
| 20  | GPIO  | 3.3v           | 40mA source, 28mA sink                          | E7         | 49      | GPIO                                                                                                                                                                                                                          |
| 21  | GPIO  | 3.3v           | 40mA source, 28mA sink                          | E11        | 53      | GPIO                                                                                                                                                                                                                          |
| 22  | GPIO  | 3.3v           | 40mA source, 28mA sink                          | EXT_USB_P  | 27      | GPIO, USB full-speed PHY D+: can be used as either normal GPIO or to connect an USB device to the ESP32-P4                                                                                                                    |
| 23  | GPIO  | 3.3v           | 40mA source, 28mA sink                          | E10        | 52      | GPIO                                                                                                                                                                                                                          |
| 24  | GPIO  | 3.3v           | 40mA source, 28mA sink                          | EXT_USB_N  | 26      | GPIO, USB full-speed PHY D-: can be used as either normal GPIO or to connect an USB device to the ESP32-P4                                                                                                                    |
| 25  | GPIO  | 3.3v           | 40mA source, 28mA sink                          | E9         | 51      | GPIO                                                                                                                                                                                                                          |
| 26  | GPIO  | 3.3v           | 40mA source, 28mA sink                          | P4_TX      | 37      | GPIO                                                                                                                                                                                                                          |
| 27  | GPIO  | 3.3v           | 40mA source, 28mA sink                          | E8         | 50      | GPIO                                                                                                                                                                                                                          |
| 28  | GPIO  | 3.3v           | 40mA source, 28mA sink                          | P4_RX      | 38      | GPIO                                                                                                                                                                                                                          |
| 29  | GPIO  | 3.3v           | 40mA source, 28mA sink                          | I2S_MCLK   | 30      | GPIO                                                                                                                                                                                                                          |
| 30  | GPIO  | 3.3v           | 40mA source, 28mA sink                          | I2S_LRCK   | 31      | GPIO                                                                                                                                                                                                                          |
| 31  | GPIO  | 3.3v           | 40mA source, 28mA sink                          | I2S_DATA   | 28      | GPIO                                                                                                                                                                                                                          |
| 32  | GPIO  | 3.3v           | 40mA source, 28mA sink                          | I2S_SCLK   | 29      | GPIO                                                                                                                                                                                                                          |
| 33  | Power | 3.3v           | 1A                                              | +3.3V      | -       | Regulated 3.3v rail                                                                                                                                                                                                           |
| 34  | GPIO  | 3.3v           | 40mA source, 28mA sink                          | I3C_SDA    | 33      | GPIO, connected to the QWIIC connector, I3C peripheral SDA pin                                                                                                                                                                |
| 35  | Power | GND            | -                                               | GND        | -       | Ground, voltage reference for all supply rails                                                                                                                                                                                |
| 36  | GPIO  | 3.3v           | 40mA source, 28mA sink                          | I3C_SCL    | 32      | GPIO, connected to the QWIIC connector, I3C peripheral SCL pin                                                                                                                                                                |

## Limitations & warnings

- Total for all 3.3v outputs must not exceed 1A of current. It is generally adviced to stay well below this figure.
- VSDCARD power rail can supply at most 100mA total to both the SD card and the expansion header.
- Do not exceed a current of 1A from or to the battery when the battery is connected to the internal battery connector.
